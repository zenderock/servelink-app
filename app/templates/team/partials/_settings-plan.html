<div class="card">
    <header class="border-b">
        <h2>{{ _("Plan & Usage") }}</h2>
        <p class="text-muted-foreground">{{ _("Manage your team's subscription and view usage limits") }}</p>
    </header>

    <div class="space-y-6">
        <!-- Current Plan -->
        <div class="space-y-3 px-4">
            <h3 class="font-medium">{{ _("Current Plan") }}</h3>
            <div class="flex items-center justify-between p-4 border rounded-lg">
                <div class="space-y-1">
                    <div class="font-medium">{{ team.current_plan.display_name }}</div>
                    <div class="text-sm text-muted-foreground">
                        {% if team.current_plan.price_per_month is none %}
                        {{ _("Free forever") }}
                        {% else %}
                        ${{ "%.2f"|format(team.current_plan.price_per_month) }} {{ _("per month") }}
                        {% endif %}
                    </div>
                </div>
                <div class="flex items-center gap-x-2">
                    <span class="px-2 py-1 text-xs font-medium rounded-full
            {% if team.current_plan.name == 'free' %}
              bg-muted text-muted-foreground
            {% else %}
              bg-primary/10 text-primary
            {% endif %}">
                        {{ team.current_plan.display_name }}
                    </span>
                </div>
            </div>
        </div>

        <!-- Usage Statistics -->
        <div class="space-y-4 px-4 py-3">
            <h3 class="font-medium">{{ _("Usage") }}</h3>

            <!-- Members Usage -->
            <div class="space-y-2">
                <div class="flex items-center justify-between text-sm">
                    <span>{{ _("Team Members") }}</span>
                    <span class="text-muted-foreground">
                        {{ team.get_usage_stats().members.current }}
                        {% if not team.get_usage_stats().members.unlimited %}
                        / {{ team.get_usage_stats().members.limit }}
                        {% endif %}
                    </span>
                </div>
                {% if not team.get_usage_stats().members.unlimited %}
                <div class="w-full bg-muted rounded-full h-2">
                    <div class="bg-primary h-2 rounded-full transition-all duration-300"
                        style="width: {{ team.get_usage_stats().members.percentage }}%"></div>
                </div>
                {% endif %}
            </div>

            <!-- Projects Usage -->
            <div class="space-y-2">
                <div class="flex items-center justify-between text-sm">
                    <span>{{ _("Projects") }}</span>
                    <span class="text-muted-foreground">
                        {{ team.get_usage_stats().projects.current }}
                        {% if not team.get_usage_stats().projects.unlimited %}
                        / {{ team.get_usage_stats().projects.limit }}
                        {% endif %}
                    </span>
                </div>
                {% if not team.get_usage_stats().projects.unlimited %}
                <div class="w-full bg-muted rounded-full h-2">
                    <div class="bg-primary h-2 rounded-full transition-all duration-300"
                        style="width: {{ team.get_usage_stats().projects.percentage }}%"></div>
                </div>
                {% endif %}
            </div>

            <!-- Custom Domains -->
            <div class="space-y-2">
                <div class="flex items-center justify-between text-sm">
                    <span>{{ _("Custom Domains") }}</span>
                    <span class="text-muted-foreground">
                        {% if team.get_usage_stats().custom_domains.allowed %}
                        {{ _("Available") }}
                        {% else %}
                        {{ _("Not available") }}
                        {% endif %}
                    </span>
                </div>
                {% if not team.get_usage_stats().custom_domains.allowed %}
                <div class="text-xs text-muted-foreground">
                    {{ _("Custom domains are not available on the Free plan") }}
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Upgrade Button -->
        {% if team.current_plan.name == 'free' %}
        <div class="pt-4 border-t px-4">
            <a href="https://servel.ink/pricing" target="_blank" rel="noopener noreferrer" class="btn-primary">
                {{ _("Upgrade to Pay as You Go") }}
            </a>
            <p class="text-xs text-muted-foreground mt-2">
                {{ _("Get unlimited teams, members, projects, and custom domains") }}
            </p>
        </div>
        {% endif %}
    </div>
</div>