{% extends "layouts/app.html" %}

{% block title %}{{ _("Search Results") }} - {{ _("Knowledge Base") }}{% endblock %}

{% block app_content %}
<div class="container max-w-screen-xl mx-auto p-8 space-y-6">
  <!-- Back to KB -->
  <a href="{{ url_for('kb_index') }}" class="inline-flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M19 12H5M12 19l-7-7 7-7"/>
    </svg>
    {{ _("Back to Knowledge Base") }}
  </a>

  <!-- Search Header -->
  <div>
    <h1 class="text-3xl font-bold mb-2">{{ _("Search Results") }}</h1>
    <p class="text-muted-foreground">
      {{ count }} {{ _("results for") }} "<strong>{{ query }}</strong>"
    </p>
  </div>

  <!-- Search Bar -->
  <form method="get" action="{{ url_for('kb_search') }}" class="max-w-2xl">
    <div class="relative">
      <input 
        type="search" 
        name="q" 
        placeholder="{{ _('Search for articles...') }}" 
        class="input pl-12"
        value="{{ query }}"
      />
      <svg class="absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="11" cy="11" r="8"/>
        <path d="m21 21-4.35-4.35"/>
      </svg>
    </div>
  </form>

  <!-- Results -->
  {% if articles %}
  <div class="card">
    <div class="divide-y">
      {% for article in articles %}
      <a href="{{ url_for('kb_article', slug=article.slug) }}" class="block px-6 py-4 hover:bg-muted/50 transition-colors">
        <div class="flex items-start justify-between gap-4">
          <div class="flex-1">
            <h3 class="font-medium mb-1">{{ article.title }}</h3>
            {% if article.excerpt %}
            <p class="text-sm text-muted-foreground line-clamp-2">{{ article.excerpt }}</p>
            {% endif %}
            <div class="flex items-center gap-4 mt-2 text-xs text-muted-foreground">
              <span class="px-2 py-0.5 bg-muted rounded text-foreground">{{ article.category|replace('_', ' ')|title }}</span>
              <span>üëÅ {{ article.view_count }} {{ _("views") }}</span>
            </div>
          </div>
          <svg class="flex-shrink-0 text-muted-foreground" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="9 18 15 12 9 6"/>
          </svg>
        </div>
      </a>
      {% endfor %}
    </div>
  </div>
  {% else %}
  <div class="card">
    <div class="p-12 text-center">
      <svg class="mx-auto h-12 w-12 text-muted-foreground/50 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
        <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
      </svg>
      <h3 class="text-lg font-medium mb-2">{{ _("No results found") }}</h3>
      <p class="text-muted-foreground mb-6">{{ _("Try different keywords or browse by category") }}</p>
      <a href="{{ url_for('kb_index') }}" class="btn-primary">
        {{ _("Browse Categories") }}
      </a>
    </div>
  </div>
  {% endif %}
</div>
{% endblock %}
