{% extends "layouts/app.html" %}

{% block title %}{{ category_name }} - {{ _("Knowledge Base") }}{% endblock %}

{% block app_content %}
<div class="container max-w-screen-xl mx-auto p-8 space-y-6">
  <!-- Back to KB -->
  <a href="{{ url_for('kb_index') }}" class="inline-flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M19 12H5M12 19l-7-7 7-7"/>
    </svg>
    {{ _("Back to Knowledge Base") }}
  </a>

  <!-- Category Header -->
  <div>
    <h1 class="text-3xl font-bold mb-2">{{ category_name }}</h1>
    <p class="text-muted-foreground">{{ articles|length }} {{ _("articles in this category") }}</p>
  </div>

  <!-- Articles -->
  {% if articles %}
  <div class="card">
    <div class="divide-y">
      {% for article in articles %}
      <a href="{{ url_for('kb_article', slug=article.slug) }}" class="block px-6 py-4 hover:bg-muted/50 transition-colors">
        <div class="flex items-start justify-between gap-4">
          <div class="flex-1">
            <h3 class="font-medium mb-1">{{ article.title }}</h3>
            {% if article.excerpt %}
            <p class="text-sm text-muted-foreground line-clamp-2">{{ article.excerpt }}</p>
            {% endif %}
            <div class="flex items-center gap-4 mt-2 text-xs text-muted-foreground">
              <span>üëÅ {{ article.view_count }} {{ _("views") }}</span>
              {% if article.helpful_count > 0 %}
              <span>üëç {{ article.helpful_count }}</span>
              {% endif %}
              <span>üìÖ {{ article.updated_at.strftime('%d %b %Y') }}</span>
            </div>
          </div>
          <svg class="flex-shrink-0 text-muted-foreground" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="9 18 15 12 9 6"/>
          </svg>
        </div>
      </a>
      {% endfor %}
    </div>
  </div>
  {% else %}
  <div class="card">
    <div class="p-12 text-center">
      <h3 class="text-lg font-medium mb-2">{{ _("No articles yet") }}</h3>
      <p class="text-muted-foreground">{{ _("Check back later for new content") }}</p>
    </div>
  </div>
  {% endif %}
</div>
{% endblock %}
